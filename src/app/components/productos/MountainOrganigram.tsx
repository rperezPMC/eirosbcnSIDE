'use client'

import { useState } from 'react'

export function MountainOrganigrama() {
  const [hoveredBranch, setHoveredBranch] = useState<string | null>(null)
  const [activeSection, setActiveSection] = useState<string>('manillars')

  const scrollToSection = (sectionId: string, branchId: string) => {
    // Actualizar sección activa
    setActiveSection(branchId)
    
    // Hacer scroll
    const element = document.getElementById(sectionId)
    if (element) {
      element.scrollIntoView({ behavior: 'smooth', block: 'start' })
    }
  }

  const branches = [
    { id: 'manillars', sectionId: 'products', x: 66.5, textX: 27 },
    { id: 'tiges', sectionId: 'tiges-section', x: 198.8, textX: 183 },
    { id: 'plats', sectionId: 'plats-section', x: 331.1, textX: 307 },
    { id: 'accessoris', sectionId: 'accessoris-section', x: 463.4, textX: 421 }
  ]

  return (
    <div className="flex justify-center py-0">
      <div className="w-[100%] max-w-[500px] md:max-w-[530px] px-5">
        <svg viewBox="0 0 530 360" className="w-full h-auto" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" aria-labelledby="org-title">
        
          {/* Logo EIROS superior */}
          <g clipPath="url(#clip0)">
            <path d="M219.505 164.75L223.385 148.93H235.915L235.385 151.07H225.905L224.745 155.71H232.935L232.435 157.8H224.235L223.045 162.61H232.555L232.025 164.75H219.505Z" fill="#898989"/>
            <path d="M239.145 164.75L243.025 148.93H246.035L242.155 164.75H239.145Z" fill="#898989"/>
            <path d="M250.345 164.75L254.225 148.93H262.575C263.865 148.93 264.855 149.06 265.545 149.31C266.245 149.56 266.725 149.92 267.015 150.38C267.295 150.84 267.435 151.39 267.435 152.04C267.435 152.22 267.425 152.42 267.395 152.64C267.365 152.85 267.335 153.08 267.285 153.32C267.245 153.56 267.185 153.79 267.115 154.02C266.955 154.6 266.775 155.13 266.575 155.59C266.375 156.06 266.135 156.47 265.865 156.82C265.595 157.17 265.245 157.47 264.825 157.72C264.405 157.97 263.885 158.16 263.265 158.29L264.745 164.75H261.625L260.435 158.61C260.245 158.61 260.045 158.61 259.845 158.62C259.645 158.62 259.435 158.63 259.225 158.63H254.865L253.355 164.75H250.345ZM255.365 156.57H259.985C260.795 156.57 261.445 156.52 261.945 156.41C262.435 156.3 262.825 156.14 263.095 155.92C263.365 155.7 263.575 155.41 263.725 155.06C263.875 154.71 264.005 154.29 264.105 153.82C264.195 153.54 264.255 153.29 264.285 153.06C264.325 152.83 264.335 152.62 264.335 152.44C264.335 152.13 264.255 151.87 264.085 151.66C263.915 151.45 263.625 151.29 263.215 151.19C262.805 151.09 262.225 151.04 261.485 151.04H256.725L255.365 156.58L255.365 156.57Z" fill="#898989"/>
            <path d="M301.585 164.94C300.825 164.94 300.025 164.92 299.195 164.89C298.355 164.86 297.535 164.82 296.725 164.76C295.915 164.71 295.185 164.65 294.535 164.59L295.035 162.5C295.655 162.55 296.315 162.59 297.015 162.64C297.715 162.69 298.405 162.72 299.065 162.76C299.725 162.8 300.295 162.81 300.765 162.81C301.365 162.81 301.885 162.81 302.325 162.79C302.765 162.77 303.155 162.74 303.485 162.67C303.815 162.61 304.115 162.52 304.385 162.39C304.615 162.28 304.805 162.13 304.965 161.93C305.125 161.73 305.265 161.5 305.385 161.24C305.505 160.98 305.605 160.72 305.675 160.45C305.745 160.18 305.795 159.93 305.835 159.69C305.865 159.45 305.885 159.26 305.885 159.1C305.885 158.84 305.815 158.64 305.675 158.51C305.535 158.38 305.295 158.28 304.965 158.22C304.635 158.16 304.175 158.1 303.595 158.04L299.315 157.51C298.205 157.39 297.455 157.11 297.055 156.67C296.655 156.23 296.465 155.64 296.465 154.89C296.465 154.61 296.485 154.31 296.535 153.97C296.575 153.63 296.645 153.29 296.735 152.94C296.985 152.02 297.315 151.28 297.735 150.73C298.155 150.18 298.685 149.76 299.305 149.48C299.935 149.2 300.655 149.01 301.485 148.91C302.315 148.81 303.245 148.76 304.285 148.76C305.045 148.76 305.805 148.78 306.585 148.81C307.355 148.84 308.095 148.89 308.775 148.95C309.465 149.01 310.035 149.08 310.495 149.16L310.015 151.18C309.525 151.12 308.955 151.07 308.325 151.03C307.695 150.99 307.055 150.96 306.405 150.94C305.765 150.92 305.145 150.91 304.565 150.91C303.985 150.91 303.445 150.93 302.995 150.96C302.545 150.99 302.165 151.04 301.845 151.1C301.525 151.16 301.245 151.25 300.995 151.38C300.745 151.5 300.535 151.68 300.345 151.9C300.165 152.12 300.015 152.37 299.895 152.65C299.785 152.93 299.705 153.21 299.655 153.49C299.615 153.77 299.585 154.04 299.585 154.28C299.585 154.65 299.725 154.89 299.995 155.02C300.265 155.14 300.755 155.24 301.465 155.32L305.585 155.76C306.255 155.84 306.845 155.95 307.365 156.09C307.885 156.24 308.295 156.49 308.595 156.85C308.895 157.21 309.045 157.75 309.045 158.47C309.045 158.64 309.045 158.83 309.015 159.04C308.995 159.25 308.965 159.48 308.925 159.72C308.885 159.96 308.825 160.21 308.755 160.49C308.495 161.53 308.135 162.36 307.695 162.97C307.255 163.58 306.735 164.03 306.135 164.32C305.535 164.6 304.855 164.78 304.105 164.86C303.345 164.94 302.505 164.98 301.565 164.98L301.585 164.94Z" fill="#898989"/>
            <path d="M288.725 149.88L286.445 152.16C286.475 152.32 286.495 152.49 286.495 152.68C286.495 153.12 286.435 153.69 286.325 154.37C286.215 155.05 286.025 155.88 285.755 156.84C285.475 158 285.215 158.96 284.975 159.71C284.735 160.46 284.485 161.05 284.225 161.47C283.965 161.89 283.635 162.19 283.245 162.38C282.855 162.56 282.365 162.68 281.775 162.72C281.185 162.77 280.445 162.79 279.545 162.79C278.545 162.79 277.735 162.76 277.135 162.71C276.725 162.67 276.395 162.59 276.135 162.45L274.225 164.36C274.505 164.47 274.825 164.56 275.185 164.62C276.205 164.82 277.615 164.92 279.415 164.92C280.855 164.92 282.055 164.85 283.005 164.72C283.955 164.59 284.735 164.36 285.345 164.03C285.955 163.7 286.455 163.24 286.835 162.64C287.225 162.04 287.565 161.27 287.865 160.33C288.165 159.39 288.485 158.24 288.815 156.89C289.065 155.88 289.255 155 289.385 154.26C289.515 153.52 289.585 152.86 289.585 152.29C289.585 151.34 289.375 150.61 288.955 150.09C288.885 150.01 288.805 149.93 288.725 149.85V149.88Z" fill="#D1D1D1"/>
            <path d="M275.435 160.9C275.435 160.62 275.475 160.32 275.535 159.98C275.605 159.59 275.695 159.13 275.815 158.6C275.925 158.07 276.065 157.49 276.225 156.84C276.505 155.68 276.765 154.72 276.995 153.97C277.225 153.22 277.475 152.63 277.735 152.21C277.995 151.79 278.325 151.49 278.725 151.3C279.125 151.11 279.615 151 280.215 150.96C280.815 150.91 281.565 150.89 282.465 150.89C283.455 150.89 284.235 150.92 284.835 150.97C285.005 150.99 285.165 151.01 285.305 151.05L287.205 149.15C287.075 149.12 286.945 149.09 286.815 149.06C285.805 148.86 284.395 148.76 282.595 148.76C281.155 148.76 279.945 148.82 278.985 148.94C278.025 149.06 277.235 149.29 276.615 149.62C275.995 149.95 275.495 150.42 275.105 151.02C274.715 151.63 274.385 152.4 274.105 153.34C273.825 154.28 273.525 155.43 273.205 156.78C272.955 157.79 272.765 158.68 272.615 159.44C272.465 160.2 272.395 160.86 272.395 161.43C272.395 162.28 272.575 162.94 272.915 163.44L275.435 160.92V160.9Z" fill="#D1D1D1"/>
            <path d="M289.225 104.71L264.495 80L239.775 104.71C238.185 106.3 238.185 108.88 239.775 110.46L259.895 130.57L252.985 137.47L257.595 142.07L264.505 135.17L271.415 142.07L276.025 137.47L269.115 130.57L289.235 110.46C290.825 108.87 290.825 106.29 289.235 104.71H289.225ZM264.495 125.96L246.105 107.58L264.495 89.2L282.885 107.58L264.495 125.96Z" fill="#D1D1D1"/>
          </g>

          {/* Texto MOUNTAIN */}
          <text x="222" y="185" fill="#50A1B0" fontSize="16" fontFamily="Saira" fontWeight="500" fontStyle="italic">MOUNTAIN</text>

          {/* Línea vertical desde logo */}
          <path d="M265 188.939V229.439" stroke="#50A1B0"/>

          {/* Línea horizontal principal */}
          <path d="M66.5613 229.439L463.439 229.516" stroke="#50A1B0"/>

          {/* Ramas interactivas */}
          {branches.map((branch) => {
            const isActive = activeSection === branch.id
            const isHovered = hoveredBranch === branch.id

            return (
              <g 
                key={branch.id}
                onClick={() => scrollToSection(branch.sectionId, branch.id)}
                onMouseEnter={() => setHoveredBranch(branch.id)}
                onMouseLeave={() => setHoveredBranch(null)}
                className="cursor-pointer transition-all duration-300"
              >
                {/* Línea vertical */}
                <path d={`M${branch.x} 229.516V270.016`} stroke="#50A1B0"/>

                {/* Rombo */}
                <g transform={`translate(${branch.x - 25.5}, 270.016)`}>
                  <path
                    d="M49.1784 29.8829L25.2014 53.86L1.22433 29.8829C-0.408109 28.2505 -0.408109 25.6095 1.22433 23.9771L25.2014 0L49.1784 23.9771C50.8109 25.6095 50.8109 28.2505 49.1784 29.8829Z"
                    fill={isActive ? '#ffffff' : 'transparent'}
                    stroke={isActive ? '#ffffff' : isHovered ? '#50A1B0' : '#D1D1D1'}
                    strokeWidth="2"
                    className="transition-all duration-300"
                  />
                </g>

                {/* Texto del botón */}
                <text 
                  x={branch.textX} 
                  y="342" 
                  fill={isActive ? '#50A1B0' : '#454545'} 
                  fontSize="16" 
                  fontFamily="Saira" 
                  fontWeight="500" 
                  fontStyle="italic"
                  className="transition-all duration-300 pointer-events-none"
                >
                  {branch.id === 'manillars' && 'Manillars'}
                  {branch.id === 'tiges' && 'Tiges'}
                  {branch.id === 'plats' && 'Plats'}
                  {branch.id === 'accessoris' && 'Accessoris'}
                </text>

                {/* Línea vertical inferior con degradado */}
                <defs>
                  <linearGradient id={`grad-${branch.id}`} x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" stopColor="#50A1B0" stopOpacity="1"/>
                    <stop offset="100%" stopColor="#50A1B0" stopOpacity="0"/>
                  </linearGradient>
                </defs>
                <path 
                  d={`M${branch.x} 324V350`} 
                  stroke={`url(#grad-${branch.id})`}
                  strokeWidth="1"
                />
              </g>
            )
          })}

          {/* Definiciones de clip paths */}
          <defs>
            <clipPath id="clip0">
              <rect width="90.99" height="84.94" fill="white" transform="translate(219.505 80)"/>
            </clipPath>
          </defs>
        </svg>
      </div>
    </div>
  )
}